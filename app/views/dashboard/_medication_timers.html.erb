<div class="medication-timers">
  <h3>Active Medication Orders</h3>

  <% if @medication_timers && @medication_timers.any? %>
    <div class="timer-grid">
      <% @medication_timers.each do |timer| %>
        <div class="medication-timer-card <%= timer[:status_class] %>">
          <div class="timer-header">
            <div class="patient-info">
              <span class="patient-name"><%= timer[:patient_name] %></span>
              <span class="room-number"><%= timer[:room] %></span>
            </div>
            <div class="timer-status <%= timer[:status_class] %>">
              <span class="timer-clock"><%= timer[:elapsed_time] %> min</span>
            </div>
          </div>
          <div class="medication-info">
            <span class="medication-icon">ðŸ’Š</span>
            <span class="medication-name"><%= timer[:medication_name] %></span>
          </div>
          <div class="order-info">
            <span class="order-time">Ordered <%= timer[:ordered_at] %></span>
            <span class="order-status"><%= timer[:current_status] %></span>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="empty-state">
      <p>No active medication orders</p>
    </div>
  <% end %>
</div>

<style>
  .medication-timers {
    margin-bottom: 30px;
  }

  .medication-timers h3 {
    margin-bottom: 15px;
    font-size: 18px;
    font-weight: 600;
    color: #24292e;
  }

  .timer-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 15px;
  }

  .medication-timer-card {
    background: white;
    border: 2px solid #e1e4e8;
    border-radius: 8px;
    padding: 15px;
    transition: all 0.2s;
  }

  .medication-timer-card.timer-green {
    border-color: #28a745;
    background: #f8fff9;
  }

  .medication-timer-card.timer-yellow {
    border-color: #ffc107;
    background: #fffef5;
  }

  .medication-timer-card.timer-red {
    border-color: #dc3545;
    background: #fff8f8;
    animation: pulse-border 2s infinite;
  }

  @keyframes pulse-border {
    0% { border-color: #dc3545; }
    50% { border-color: #ff6b7a; }
    100% { border-color: #dc3545; }
  }

  .timer-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
  }

  .patient-info {
    display: flex;
    flex-direction: column;
  }

  .patient-name {
    font-weight: 600;
    color: #24292e;
  }

  .room-number {
    font-size: 12px;
    color: #586069;
  }

  .timer-status {
    padding: 4px 8px;
    border-radius: 4px;
    font-weight: 600;
  }

  .timer-status.timer-green {
    background: #d4edda;
    color: #155724;
  }

  .timer-status.timer-yellow {
    background: #fff3cd;
    color: #856404;
  }

  .timer-status.timer-red {
    background: #f8d7da;
    color: #721c24;
  }

  .medication-info {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 10px;
    padding: 8px;
    background: #f6f8fa;
    border-radius: 4px;
  }

  .medication-icon {
    font-size: 20px;
  }

  .medication-name {
    font-weight: 500;
    color: #24292e;
  }

  .order-info {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: #586069;
  }

  .order-status {
    font-weight: 500;
    color: #0366d6;
  }
</style>